<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Square Escape</title>
    <link rel="icon" href="./assets/images/square.png" type="image/x-icon">
    <link rel="stylesheet" href="css/main.css">
</head>

<body>
    <div class="squares-container"></div> <!-- Container for flying squares -->
    <div class="container">
        <h1>Square Escape</h1>
        <fieldset id="playerSelection">
            <legend>Choose Number of Players</legend>
            <div class="player-option">
                <input type="radio" name="players" id="onePlayer" value="1" onclick="changeBackgroundGradient(1)">
                <label for="onePlayer">1 Player</label>
            </div>
            <div class="player-option">
                <input type="radio" name="players" id="twoPlayers" value="2" onclick="changeBackgroundGradient(2)">
                <label for="twoPlayers">2 Players</label>
            </div>
            <div class="player-option">
                <input type="radio" name="players" id="threePlayers" value="3" onclick="changeBackgroundGradient(3)">
                <label for="threePlayers">3 Players</label>
            </div>
            <div class="player-option">
                <input type="radio" name="players" id="fourPlayers" value="4" onclick="changeBackgroundGradient(4)">
                <label for="fourPlayers">4 Players</label>
            </div>
        </fieldset>
        <button class="start-button" onclick="startGame()">Start Game</button>
    </div>

    <script>
        const squaresContainer = document.querySelector('.squares-container');

        function createSquare() {
            const square = document.createElement('div');
            square.className = 'square';

            // Randomize the size and position
            const size = Math.random() * 30 + 10; // Size between 10px and 40px
            square.style.width = `${size}px`;
            square.style.height = `${size}px`;

            // Random horizontal position
            square.style.left = `${Math.random() * 100}vw`; // Random horizontal position

            // Random vertical position starting from the bottom
            const startY = Math.random() * 50 + 10; // Start from 50% to 100% of the viewport height
            square.style.bottom = `${startY}vh`; // Position from the bottom

            // Set a random background color with opacity
            square.style.backgroundColor = `rgba(255, 255, 255, ${Math.random()})`; // Random opacity

            // Set a random animation duration
            const duration = Math.random() * 5 + 3; // Duration between 3s and 8s
            square.style.animationDuration = `${duration}s`;

            // Set animation properties for flying
            square.style.animationName = 'fly'; // Use the fly animation

            squaresContainer.appendChild(square);

            // Remove square after animation ends
            square.addEventListener('animationend', () => {
                square.remove();
            });
        }

        // Create squares at intervals
        setInterval(createSquare, 300); // Adjust interval as needed

        function startGame() {
            const selectedPlayers = document.querySelector('input[name="players"]:checked').value;
            sessionStorage.setItem('playerCount', selectedPlayers);  // Save player count
            location.href = 'game.html';
        }

        function changeBackgroundGradient(playerCount) {
            const colors = {
                1: 'rgba(255, 0, 0, 1), rgba(255, 0, 0, 1)', // Red
                2: 'rgba(255, 0, 0, 1), rgba(0, 0, 255, 1)', // Red and Blue
                3: 'rgba(255, 0, 0, 1), rgba(0, 0, 255, 1), rgba(0, 128, 0, 1)', // Red, Blue, and Darker Green
                4: 'rgba(255, 0, 0, 1), rgba(0, 0, 255, 1), rgba(0, 128, 0, 1), rgba(139, 69, 19, 1)' // Red, Blue, Darker Green, and Brown
            };

            document.body.style.background = `linear-gradient(270deg, ${colors[playerCount]})`;
        }
    </script>
</body>

</html>